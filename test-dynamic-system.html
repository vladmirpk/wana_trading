<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic System Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .main-card {
            background: white;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .feature-card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            margin-bottom: 20px;
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background-color: #28a745; }
        .status-warning { background-color: #ffc107; }
        .status-error { background-color: #dc3545; }
        .demo-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .live-preview {
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            padding: 15px;
            background: white;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <!-- Header -->
        <div class="header-section mb-4">
            <img src="images/wana_trader.png" alt="Wana Trading" height="80" class="mb-3">
            <h1>Dynamic Template System</h1>
            <p class="mb-0">Testing the new template-based content management system</p>
        </div>

        <!-- Main Content -->
        <div class="main-card">
            <div class="card-body p-4">
                <h4 class="mb-4"><i class="fas fa-cogs me-2"></i>System Overview</h4>
                
                <!-- Feature Cards -->
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <i class="fas fa-code fa-3x text-primary mb-3"></i>
                                <h5>Template-Based</h5>
                                <p class="text-muted">HTML uses placeholders instead of hardcoded content</p>
                                <div class="status-indicator status-success"></div>
                                <span>Active</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <i class="fas fa-sync fa-3x text-success mb-3"></i>
                                <h5>Real-Time Updates</h5>
                                <p class="text-muted">Content updates immediately across all pages</p>
                                <div class="status-indicator status-success"></div>
                                <span>Working</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card feature-card">
                            <div class="card-body text-center">
                                <i class="fas fa-database fa-3x text-info mb-3"></i>
                                <h5>localStorage Sync</h5>
                                <p class="text-muted">Data persists and syncs across browser tabs</p>
                                <div class="status-indicator status-success"></div>
                                <span>Connected</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Demo Section -->
                <div class="demo-section">
                    <h5><i class="fas fa-play me-2"></i>Live Demo</h5>
                    <p>Test the dynamic system by making changes and seeing them reflected immediately:</p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Current Data (from localStorage):</h6>
                            <div class="live-preview" id="currentData">
                                <div class="text-muted">Loading...</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Quick Test Actions:</h6>
                            <button class="btn btn-sm btn-primary mb-2" onclick="testUpdateCompany()">
                                <i class="fas fa-building me-1"></i>Update Company Name
                            </button><br>
                            <button class="btn btn-sm btn-success mb-2" onclick="testAddProduct()">
                                <i class="fas fa-plus me-1"></i>Add Test Product
                            </button><br>
                            <button class="btn btn-sm btn-warning mb-2" onclick="testUpdateSlide()">
                                <i class="fas fa-image me-1"></i>Update Carousel Slide
                            </button><br>
                            <button class="btn btn-sm btn-info" onclick="testUpdateContact()">
                                <i class="fas fa-phone me-1"></i>Update Contact Info
                            </button>
                        </div>
                    </div>
                </div>

                <!-- How It Works -->
                <div class="demo-section">
                    <h5><i class="fas fa-info-circle me-2"></i>How It Works</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Old System (Static):</h6>
                            <ul class="text-muted">
                                <li>Hardcoded content in HTML</li>
                                <li>Manual editing required</li>
                                <li>No real-time updates</li>
                                <li>Server dependency</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>New System (Dynamic):</h6>
                            <ul class="text-success">
                                <li>Template placeholders in HTML</li>
                                <li>Admin tools for easy editing</li>
                                <li>Real-time updates across pages</li>
                                <li>Works without server</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="text-center mt-4">
                    <a href="index-dynamic.html" class="btn btn-primary me-3">
                        <i class="fas fa-eye me-2"></i>View Dynamic Website
                    </a>
                    <a href="one-click-updater.html" class="btn btn-success me-3">
                        <i class="fas fa-bolt me-2"></i>One-Click Updates
                    </a>
                    <a href="admin.html" class="btn btn-info me-3">
                        <i class="fas fa-cog me-2"></i>Admin Panel
                    </a>
                    <a href="index.html" class="btn btn-warning">
                        <i class="fas fa-file-code me-2"></i>Original Static Site
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test functions for the dynamic system
        function testUpdateCompany() {
            const currentData = loadFromLocalStorage();
            if (currentData.siteConfig) {
                currentData.siteConfig.company.name = "Wana Trading (UPDATED)";
                currentData.siteConfig.company.tagline = "Updated tagline - " + new Date().toLocaleTimeString();
                saveToLocalStorage(currentData);
                updateDisplay();
                showNotification('Company info updated! Check the dynamic website.', 'success');
            }
        }

        function testAddProduct() {
            const currentData = loadFromLocalStorage();
            if (currentData.products) {
                const newProduct = {
                    id: currentData.products.length + 1,
                    title: "Test Product " + new Date().getTime(),
                    description: "This is a test product added dynamically",
                    image: "images/wana_trader.png",
                    imageAlt: "Test Product",
                    category: "Test",
                    badgeColor: "primary",
                    badgeGradient: "linear-gradient(135deg, #667eea, #764ba2)"
                };
                currentData.products.push(newProduct);
                saveToLocalStorage(currentData);
                updateDisplay();
                showNotification('Test product added! Check the dynamic website.', 'success');
            }
        }

        function testUpdateSlide() {
            const currentData = loadFromLocalStorage();
            if (currentData.carouselSlides && currentData.carouselSlides.length > 0) {
                currentData.carouselSlides[0].title = "Updated Slide - " + new Date().toLocaleTimeString();
                currentData.carouselSlides[0].description = "This slide was updated dynamically";
                saveToLocalStorage(currentData);
                updateDisplay();
                showNotification('Carousel slide updated! Check the dynamic website.', 'success');
            }
        }

        function testUpdateContact() {
            const currentData = loadFromLocalStorage();
            if (currentData.siteConfig) {
                currentData.siteConfig.contact.email = "updated@wanatrading.com";
                currentData.siteConfig.contact.phones = ["+263 999 999 999"];
                saveToLocalStorage(currentData);
                updateDisplay();
                showNotification('Contact info updated! Check the dynamic website.', 'success');
            }
        }

        function loadFromLocalStorage() {
            try {
                const siteConfig = localStorage.getItem('wanaTrading_siteConfig');
                const carouselSlides = localStorage.getItem('wanaTrading_carouselSlides');
                const products = localStorage.getItem('wanaTrading_products');
                
                return {
                    siteConfig: siteConfig ? JSON.parse(siteConfig) : null,
                    carouselSlides: carouselSlides ? JSON.parse(carouselSlides) : null,
                    products: products ? JSON.parse(products) : null
                };
            } catch (error) {
                console.error('Error loading from localStorage:', error);
                return {};
            }
        }

        function saveToLocalStorage(data) {
            try {
                if (data.siteConfig) {
                    localStorage.setItem('wanaTrading_siteConfig', JSON.stringify(data.siteConfig));
                }
                if (data.carouselSlides) {
                    localStorage.setItem('wanaTrading_carouselSlides', JSON.stringify(data.carouselSlides));
                }
                if (data.products) {
                    localStorage.setItem('wanaTrading_products', JSON.stringify(data.products));
                }
                console.log('💾 Data saved to localStorage');
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }

        function updateDisplay() {
            const currentData = loadFromLocalStorage();
            const display = document.getElementById('currentData');
            
            if (currentData.siteConfig && currentData.products && currentData.carouselSlides) {
                display.innerHTML = `
                    <div class="mb-2">
                        <strong>Company:</strong> ${currentData.siteConfig.company.name}<br>
                        <strong>Products:</strong> ${currentData.products.length}<br>
                        <strong>Slides:</strong> ${currentData.carouselSlides.length}<br>
                        <strong>Email:</strong> ${currentData.siteConfig.contact.email}
                    </div>
                    <small class="text-muted">Last updated: ${new Date().toLocaleTimeString()}</small>
                `;
            } else {
                display.innerHTML = `
                    <div class="text-warning">
                        <i class="fas fa-exclamation-triangle me-1"></i>
                        No data found in localStorage. Try opening admin tools first.
                    </div>
                `;
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} position-fixed`;
            notification.style.cssText = `
                top: 20px;
                right: 20px;
                z-index: 10000;
                min-width: 300px;
                border-radius: 15px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} me-2"></i>
                ${message}
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
            
            // Listen for storage changes
            window.addEventListener('storage', function(e) {
                if (e.key && e.key.startsWith('wanaTrading_')) {
                    console.log('🔄 Storage change detected');
                    updateDisplay();
                }
            });
        });
    </script>

    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/68888ead171f1719311df197/1j1amqmfh';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
</body>
</html> 